<!doctype html><html class=no-js lang=ja>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="IE=edge">
<title>PowerShellのプロファイルをカスタマイズしてCLIの操作を快適にする - sheepla-note</title>
<script>(function(a,b){a[b]=a[b].replace("no-js","js")})(document.documentElement,"className")</script>
<meta name=description content>
<meta name=twitter:card content="summary">
<meta name=twitter:title content="PowerShellのプロファイルをカスタマイズしてCLIの操作を快適にする">
<meta name=twitter:description content="この記事では、PowerShellのプロファイルを編集してPowerShellのCLI操作を快適にする方法を紹介します。 プロファイルとは Po">
<link rel=preconnect href=https://fonts.gstatic.com crossorigin>
<link rel=dns-prefetch href=//fonts.googleapis.com>
<link rel=dns-prefetch href=//fonts.gstatic.com>
<link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">
<link rel=stylesheet href=/sheepla-note/css/style.css>
<link rel=stylesheet href=/sheepla-note/css/custom.css>
<link rel="shortcut icon" href=/sheepla-note/favicon.ico>
</head>
<body class=body>
<div class="container container--outer">
<header class=header>
<div class="container header__container">
<div class=logo>
<a class=logo__link href=/sheepla-note title=sheepla-note rel=home>
<div class="logo__item logo__text">
<div class=logo__title>sheepla-note</div>
<div class=logo__tagline>ひつじの備忘録</div>
</div>
</a>
</div>
<nav class=menu>
<button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>メニュー</span>
</button>
<ul class=menu__list>
<li class=menu__item>
<a class=menu__link href=/sheepla-note/posts/introduction/>
<span class=menu__text>自己紹介</span>
</a>
</li>
</ul>
</nav>
</div>
</header>
<div class="wrapper flex">
<div class=primary>
<main class=main role=main>
<article class=post>
<header class=post__header>
<h1 class=post__title>PowerShellのプロファイルをカスタマイズしてCLIの操作を快適にする</h1>
<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2021-09-05T00:00:00Z>September 05, 2021</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/sheepla-note/categories/powershell/ rel=category>powershell</a>
</span>
</div></div>
</header><div class="content post__content clearfix">
<p>この記事では、PowerShellのプロファイルを編集してPowerShellのCLI操作を快適にする方法を紹介します。</p>
<h2 id=プロファイルとは>プロファイルとは</h2>
<p>PowerShellにおけるプロファイルとは、PowerShellを起動したときに自動で読み込まれるスクリプトのことです。</p>
<blockquote>
<p>PowerShell プロファイルを作成して、環境をカスタマイズし、開始するすべての PowerShell セッションにセッション固有の要素を追加できます。
PowerShell プロファイルは、PowerShell の開始時に実行されるスクリプトです。 プロファイルをログオン スクリプトとして使用して、環境をカスタマイズできます。 コマンド、エイリアス、関数、変数、スナップイン、モジュール、PowerShell ドライブを追加できます。 また、プロファイルに他のセッション固有の要素を追加して、インポートまたは再作成することなく、すべてのセッションで使用することもできます。</p>
<p><a href="https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_profiles?view=powershell-7.1">about Profiles - Microsoft Docs</a></p>
</blockquote>
<h2 id=profileを作成>$PROFILEを作成</h2>
<p>プロファイルのパスは、変数 <code>$PROFILE</code> に格納されています。(OSやPowerShellのバージョンによって異なります) 新規作成するには以下のコマンドレットを実行してください。 <code>notepad $PROFILE</code> またはお好きなエディタで編集します。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>New-Item -Type File -Path $PROFILE -Force <span style=color:#75715e># 新規作成</span>
notepad $PROFILE                          <span style=color:#75715e># 編集</span>
</code></pre></div><p>編集したプロファイルを再読込するには、<code>. $PROFILE</code> を実行してください。</p>
<h3 id=プロファイルを読み込まずにpowershellを起動>プロファイルを読み込まずにPowerShellを起動</h3>
<p>プロファイルを読み込まずにPowerShellを起動するには <code>-NoProfile</code> スイッチを有効にします。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>powershell -NoProfile <span style=color:#75715e># Windows PowerShellの場合</span>
pwsh -NoProfile       <span style=color:#75715e># PowerShell Coreの場合</span>
</code></pre></div><h3 id=実行ポリシーについて>実行ポリシーについて</h3>
<p>Windowsのデフォルト設定では実行ポリシーが「<code>Restricted</code>」になっており、PowerShellスクリプト(<code>*.ps1</code>, <code>*.ps1xml</code>, <code>*.psm1</code>)を実行できません。実行ポリシーを変更する必要があります。以下を実行すると、ローカルコンピューター上にあるスクリプトおよびインターネット上の電子署名済みのスクリプトを実行できるようになります。<code>-Scope CurrentUser</code> を指定することで、影響範囲を現在のユーザーのみに限定することができます。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>Set-ExecutionPolicy RemoteSigned -Scope CurrentUser
</code></pre></div><p>実行ポリシーについては以下のドキュメントを参照してください。</p>
<blockquote>
<p><a href="https://docs.microsoft.com/ja-jp/powershell/module/microsoft.powershell.core/about/about_execution_policies?view=powershell-7.1#execution-policy-scope">About Execution Policies - MS Docs</a></p>
</blockquote>
<h2 id=基本編psreadlineモジュールの設定>基本編(PSReadlineモジュールの設定)</h2>
<p>PowerShellには <code>PSReadline</code> というモジュールがデフォルトでインストールされています。
<code>Set-PSReadlineOption</code>, <code>Set-PSReadlineKeyHandler</code> コマンドレットを使うことでキーバインドやシンタックスハイライトの色などをカスタマイズすることができます。詳しくは以下のドキュメントを参照してください。</p>
<blockquote>
<p><a href="https://docs.microsoft.com/en-us/powershell/module/psreadline/?view=powershell-7.1">About PSReadline - Microsoft Docs</a></p>
</blockquote>
<h3 id=予測インテリセンスを有効化>予測インテリセンスを有効化</h3>
<p>PSReadlineモジュールには、予測インテリセンス機能が装備されています。これは、fishのデフォルト機能やzshで言う <code>zsh-autosuggestions</code> のように、コマンドのタイプ中に履歴から予測候補を出してくれる機能です。</p>
<blockquote>
<p><a href=https://github.com/zsh-users/zsh-autosuggestions>zsh-users/zsh-autosuggestions</a></p>
</blockquote>
<p>この機能はデフォルトでは無効になっています。有効化するには以下を実行してください。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>Set-PSReadLineOption -PredictionSource History
</code></pre></div><h3 id=重複した履歴を保存しないようにする>重複した履歴を保存しないようにする</h3>
<p>履歴の行が重複すると、検索して再実行する際に少し不便です。重複した履歴を保存しないようにするには以下を実行します。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>Set-PSReadlineOption -HistoryNoDuplicates
</code></pre></div><h3 id=ベル音の無効化>ベル音の無効化</h3>
<p>PowerShellを操作しているとベル音が頻繁に鳴り煩わしいと感じるかもしれません。ベル音を無効にするには以下を実行します。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>Set-PSReadlineOption -BellStyle = <span style=color:#e6db74>&#34;None&#34;</span>
</code></pre></div><h3 id=キーバインドの設定>キーバインドの設定</h3>
<h4 id=キーバインド一覧の取得>キーバインド一覧の取得</h4>
<p>設定されているキーバインドの一覧は <code>Get-PSReadlineKeyHandler</code> コマンドレットで取得できます。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>PS&gt; Get-PSReadlineKeyHandler

Basic editing functions
=======================

Key              <span style=color:#66d9ef>Function</span>              Description
---              --------              -----------
Ctrl+g           Abort                 Abort the current operation, e.g. incremental history search
Enter            AcceptLine            Accept the input or move to the next line <span style=color:#66d9ef>if</span> input is missing a closing token.
Shift+Enter      AddLine               Move the cursor to the next line without attempting to execute the input
Backspace        BackwardDeleteChar    Delete the character before the cursor
...以下略...

</code></pre></div><h4 id=キーバインド一覧のチートシートを作る>キーバインド一覧のチートシートを作る</h4>
<p>キーバインド一覧を <code>ConvertTo-Html</code> コマンドレットを使ってHTMLに変換し、チートシートを作っておくと便利です。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>Get-PSReadlineKeyHandler | ConvertTo-Html | Out-File -Encoding <span style=color:#66d9ef>Default</span> ~/Documents/ps-keybindings.html
</code></pre></div><h4 id=行編集のキーバインドをemacsvi風に>行編集のキーバインドをEmacs/Vi風に</h4>
<p>行編集のキーバインドをEmacs/Vi風に変更するには以下を実行してください。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>Set-PSReadlineOption -EditMode <span style=color:#e6db74>&#34;Emacs&#34;</span> <span style=color:#75715e># Emacs風キーバインド</span>
Set-PSReadlineOption -EditMode <span style=color:#e6db74>&#34;Vi&#34;</span>    <span style=color:#75715e># Vi風キーバインド</span>
</code></pre></div><p>Emacs風キーバインドにを有効にすると、カーソル移動やキルリングの他に <code>Ctrl+R</code>, <code>Ctrl+s</code> での履歴のインクリメンタルサーチが使えるようになります。bashとほぼ同様の感覚で使えるので快適です。</p>
<pre><code># 「Ctrl+R cd」とタイプしたときの例
PS /home/sheepla&gt; cd ~/Documents
bck-i-search: cd_
</code></pre><h4 id=個別にキーを割り当てる>個別にキーを割り当てる</h4>
<p>キーを押下したときの動作を個別に設定するには <code>Set-PSReadlineKeyHandler</code> コマンドレットを使用します。例えば、<code>Ctrl+o</code> を押下したときに補完メニューを表示するように設定するには以下を実行します。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>Set-PSReadlineKeyHandler -Key <span style=color:#e6db74>&#34;Ctrl+o&#34;</span> -Function <span style=color:#e6db74>&#34;MenuComplete&#34;</span>
</code></pre></div><h4 id=さらに高度なキーバインド設定>さらに高度なキーバインド設定</h4>
<p><code>Set-PSReadlineKeyHandler</code> は <code>-ScriptBlock</code> パラメータを指定することでさらに高度なカスタマイズが可能です。例えば、カッコや引用符を自動で閉じるようにすることができます。こちらの記事が参考になります。</p>
<blockquote>
<p><a href=https://qiita.com/AWtnb/items/5551fcc762ed2ad92a81>【PowerShell】PsReadLine 設定のススメ - Qiita</a></p>
</blockquote>
<h3 id=ハイライトカラーの設定>ハイライトカラーの設定</h3>
<p>PowerShellのコンソールではデフォルトでシンタックスハイライトが有効になっています。それぞれの色を変更するには、<code>Set-PSReadLineOption</code> の <code>-Colors</code> パラメータに値を設定します。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>Set-PSReadLineOption -Colors @{
    Command            = <span style=color:#e6db74>&#34;Magenta&#34;</span>
    Number             = <span style=color:#e6db74>&#34;DarkGray&#34;</span>
    Member             = <span style=color:#e6db74>&#34;DarkGray&#34;</span>
    Operator           = <span style=color:#e6db74>&#34;DarkGray&#34;</span>
    Type               = <span style=color:#e6db74>&#34;DarkGray&#34;</span>
    Variable           = <span style=color:#e6db74>&#34;DarkGreen&#34;</span>
    <span style=color:#66d9ef>Parameter</span>          = <span style=color:#e6db74>&#34;DarkGreen&#34;</span>
    ContinuationPrompt = <span style=color:#e6db74>&#34;DarkGray&#34;</span>
    <span style=color:#66d9ef>Default</span>            = <span style=color:#e6db74>&#34;DarkGray&#34;</span>
}
</code></pre></div><p>ちなみにこの変数の値は、<code>ConsoleColor</code> 型のenum値・24bitカラーエスケープシーケンス・RGB値
の中から好きな形式で設定可能です。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>Set-PSReadLineOption -Colors @{
     <span style=color:#75715e># ConsoleColor型のenum値を使う</span>
     <span style=color:#e6db74>&#34;Error&#34;</span> = <span style=color:#66d9ef>[ConsoleColor]</span>::DarkRed

     <span style=color:#75715e># 24 bitカラーエスケープシーケンス</span>
     <span style=color:#e6db74>&#34;String&#34;</span> = <span style=color:#e6db74>&#34;</span>$(<span style=color:#66d9ef>[char]</span>0x1b)<span style=color:#e6db74>[38;5;100m&#34;</span>

     <span style=color:#75715e># RGB値</span>
     <span style=color:#e6db74>&#34;Command&#34;</span> = <span style=color:#e6db74>&#34;#8181f7&#34;</span>
}
</code></pre></div><h3 id=各プロパティをまとめて設定>各プロパティをまとめて設定</h3>
<p>以下のようにハッシュテーブルを作って各プロパティをまとめて設定することもできます。ファイルに記述する際に少し見通しが良くなると思います。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>$PSReadlineOptions = @{
    BellStyle = <span style=color:#e6db74>&#34;None&#34;</span>
	EditMode = <span style=color:#e6db74>&#34;Emacs&#34;</span>
	HistoryNoDuplicates = $true
	HistorySearchCursorMovesToEnd = $true
	Colors = @{
		Command = <span style=color:#e6db74>&#34;White&#34;</span>
	}
}
Set-PSReadlineOption @PSReadlineOptions
</code></pre></div><h2 id=外部ツール編>外部ツール編</h2>
<p>標準機能のみを使うのも良いですが、外部のツールを導入することでPowerShellをさらに使いやすくすることができます。</p>
<h3 id=scoopでツールのインストールを自動化する>scoopでツールのインストールを自動化する</h3>
<p>Windowsにツールを導入する場合、<strong>scoop</strong> や <strong>Chocolatey</strong> を使ってインストールを自動化すると便利です。今回はscoopをインストールします。</p>
<ul>
<li>
<p><a href=https://scoop.sh>scoop &ndash; a CLI installer for Windows</a></p>
</li>
<li>
<p><a href=https://chocolatey.org>Chocolatey &ndash; THE PACKAGE MANAGER FOR WINDOWS</a></p>
</li>
</ul>
<p><strong>メモ</strong>: scoopとchocolateyの違いについては以下の記事が参考になります。</p>
<blockquote>
<p><a href=https://tech.guitarrapc.com/entry/2019/12/01/233522>Windows開発環境の構築をChocolateyからscoopに切り替える - tech.guitarrapc.com</a></p>
</blockquote>
<h4 id=インストール>インストール</h4>
<p>scoopをインストールするには以下を実行します。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>iwr -useb get.scoop.sh | iex
</code></pre></div><p><a href=https://raw.githubusercontent.com/lukesampson/scoop/master/bin/install.ps1>lukesampson/scoop/master/bin/install.ps1 - GitHub</a> をダウンロードして実行する方法と等価です。実行する前に目を通しておくと安心かもしれません。</p>
<h3 id=素早くcdするzoxide>素早くcdする(zoxide)</h3>
<p><strong>zoxide</strong> を使うと、カレントディレクトリディレクトリ素早く変更することができます。
パスを記憶しておいたり毎回タイプしたりする必要がないので、ディレクトリの階層が深くなりがちなWindowsで使うと特に有効です。</p>
<blockquote>
<p><a href=https://github.com/ajeetdsouza/zoxide>ajeetdsouza/zoxide - GitHub</a></p>
</blockquote>
<h4 id=使い方>使い方</h4>
<ul>
<li><code>z</code>コマンド: 基本的にはcdコマンドと同様ですが、フルパスや相対パスではなく、パスの一部だけを指定することができます。</li>
<li><code>zi</code>コマンド: 移動履歴をfzfで絞り込み、選択したディレクトリに移動します。</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>z &lt;フルパス&gt;               <span style=color:#75715e># そのディレクトリに移動(cdと同じ)</span>
z &lt;相対パス&gt;               <span style=color:#75715e># そのディレクトリに移動(cdと同じ)</span>
z &lt;一度移動したパスの一部&gt; <span style=color:#75715e># 移動履歴を検索してパスの一部にマッチするディレクトリに移動</span>
z -                        <span style=color:#75715e># 直前にいたディレクトリに戻る(cdと同じ)</span>
z ..                       <span style=color:#75715e># 親ディレクトリに移動(cdと同じ)</span>
zi &lt;検索ワード&gt;            <span style=color:#75715e># fzfを使って移動履歴を絞り込んで選択したディレクトリに移動</span>
</code></pre></div><h4 id=インストール-1>インストール</h4>
<p>zoxideとfzfをインストールします。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>scoop install zoxide fzf
</code></pre></div><p>プロファイルに以下を追記してください。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>Invoke-Expression (&amp; {
    $hook = <span style=color:#66d9ef>if</span> ($PSVersionTable.PSVersion.Major <span style=color:#f92672>-lt</span> 6) { <span style=color:#e6db74>&#39;prompt&#39;</span> } <span style=color:#66d9ef>else</span> { <span style=color:#e6db74>&#39;pwd&#39;</span> }
    (zoxide init --hook $hook powershell) -join <span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>`n</span><span style=color:#e6db74>&#34;</span>
})
</code></pre></div><h3 id=プロンプトをカスタマイズするstarship>プロンプトをカスタマイズする(starship)</h3>
<p>外部のプロンプトツールを導入することで、PowerShellのプロンプトを見やすく・かつオシャレにすることができます。PowerShellをサポートしているものは以下の2つがあります。</p>
<ul>
<li>
<p><a href=https://github.com/justjanne/powerline-go>justjanne/powerline-go - GitHub</a></p>
</li>
<li>
<p><a href=https://github.com/starship/starship>starship/starship - GitHub</a></p>
</li>
</ul>
<p>今回はstarshipをインストールします。</p>
<blockquote>
<p><a href=https://starship.rs>starship - cross shell prompt</a></p>
</blockquote>
<h4 id=starshipの導入>starshipの導入</h4>
<p>scoopでインストールします。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>scoop install starship
</code></pre></div><h4 id=セットアップ>セットアップ</h4>
<p>インストールが完了したらプロファイルに以下の行を追加してください。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>Invoke-Expression (&amp;starship init powershell)
</code></pre></div><p><code>. $PROFILE</code> でプロファイルを再読込してプロンプトが変化すればOKです。</p>
<h4 id=カスタマイズ>カスタマイズ</h4>
<p>starshipをカスタマイズするには <code>~/.config/starship.toml</code> を編集します。具体的なカスタマイズ方法については公式ドキュメントを参照してください。</p>
<blockquote>
<p><a href=https://starship.rs/config>Starship Configuration</a></p>
</blockquote>
<blockquote>
<p><a href=https://starship.rs/ja-JP/config/>Starship Configuration 日本語版</a></p>
</blockquote>
<h3 id=sudo相当のコマンドを導入する>sudo相当のコマンドを導入する</h3>
<p>通常、Windows上で管理者権限でコマンドを実行する場合、管理者権限でPowerShellやコマンドプロンプトを新しく起動し、UAC(ユーザーアカウント制御)ポップアップをクリックする必要があります。しかし、毎回この作業を行うのは面倒です。</p>
<p>回避策として、Linuxの <code>sudo</code> に相当するツールを導入すると便利です。</p>
<ul>
<li><a href=https://github.com/mattn/sudo>mattn/sudo - GitHub</a></li>
<li><a href=https://github.com/gerardog/gsudo>gerardog/gsudo - GitHub</a> ※ <code>scoop install gsudo</code></li>
<li><a href=https://github.com/lukesampson/psutils/blob/master/sudo.ps1>lukesampson/psutils/sudo.ps1 - GitHub</a> ※ <code>scoop install sudo</code></li>
</ul>
<p><strong>注意</strong>: インストールと実行は自己責任で行ってください。</p>
<p>psutilsのsudo.ps1はPowerShellのコマンドレットをそのまま管理者権限で実行できます。今回はこれをインストールします。</p>
<h4 id=インストール-2>インストール</h4>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>scoop install sudo
</code></pre></div><h4 id=使い方-1>使い方</h4>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>sudo &lt;PowerShellのコマンドレットなど&gt;
</code></pre></div><h3 id=fzfとの統合psfzfモジュール>fzfとの統合(PSFzfモジュール)</h3>
<p>fzfのラッパーモジュールである <strong>PSFzf</strong> を導入することで、コマンドの履歴やパス絞り込み検索等の操作をfzfで簡単に行えるようになります。</p>
<blockquote>
<p><a href=https://www.powershellgallery.com/packages/PSFzf/2.2.8-alpha>PSFzf - PowerShell Gallery</a>
<a href=https://github.com/kelleyma49/PSFzf>kellyma49/PSFfzf</a></p>
</blockquote>
<h4 id=使い方-2>使い方</h4>
<p>PSFzfにはディレクトリの移動・ファイルの編集・履歴の検索・プロセスのkill等をfzfで行える便利なコマンドレットが含まれています。詳しい使い方はリポジトリのREADMEを参照してください。</p>
<blockquote>
<p><a href=https://github.com/kelleyma49/PSFzf/blob/master/README.md>README.md on kelleyma49/PSfzf - GitHub</a></p>
</blockquote>
<h4 id=インストール-3>インストール</h4>
<p>fzfをインストールします。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>scoop install fzf
</code></pre></div><p>PSFzfをインストールします。<code>Get-Module -All PSFzf</code> を実行してPSFzfモジュールの情報が表示されればOKです。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>Install-Module -Scope CurrentUser PSFzf
</code></pre></div><h4 id=設定>設定</h4>
<p>ファイルパスを絞り込み入力に <code>Ctrl+t</code> 、履歴の絞り込み検索に <code>Ctrl+r</code> を割り当てるには以下の行をプロファイルに追記してください。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>Set-PsFzfOption -PSReadlineChordProvider <span style=color:#e6db74>&#39;Ctrl+t&#39;</span> -PSReadlineChordReverseHistory <span style=color:#e6db74>&#39;Ctrl+r&#39;</span>
</code></pre></div>
</div>
<footer class=post__footer>
<div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg>
<ul class=tags__list>
<li class=tags__item>
<a class="tags__link btn" href=/sheepla-note/tags/powershell/ rel=tag>powershell</a>
</li>
</ul>
</div>
</footer>
</article>
</main>
<div class="authorbox clearfix">
<figure class=authorbox__avatar>
<img alt="sheepla avatar" src=/sheepla-note/img/avatar.png class=avatar height=90 width=90>
</figure>
<div class=authorbox__header>
<span class=authorbox__name>sheeplaについて</span>
</div>
<div class=authorbox__description>
Linux, Vim, PowerShell等を気ままに触っているただのひつじ。
</div>
</div>
</div>
<aside class=sidebar>
<div class="widget-social widget">
<h4 class="widget-social__title widget__title">ソーシャル</h4>
<div class="widget-social__content widget__content">
<div class="widget-social__item widget__item">
<a class="widget-social__link widget__link btn" title=Twitter rel="noopener noreferrer" href=https://twitter.com/sheeeeepla target=_blank><svg class="widget-social__link-icon icon icon-twitter" width="24" height="24" viewBox="0 0 384 312"><path d="m384 36.9c-14.1 6.3-29.3 10.5-45.2 12.4 16.3-9.7 28.8-25.2 34.6-43.6-15.2 9-32.1 15.6-50 19.1-14.4-15.2-34.9-24.8-57.5-24.8-43.5.0-78.8 35.3-78.8 78.8.0 6.2.7 12.2 2 17.9-65.5-3.3-123.5-34.6-162.4-82.3C20 26 16.1 39.6 16.1 54c0 27.3 13.9 51.4 35 65.6-12.9-.4-25.1-4-35.7-9.9v1c0 38.2 27.2 70 63.2 77.2-6.6 1.8-13.6 2.8-20.8 2.8-5.1.0-10-.5-14.8-1.4 10 31.3 39.1 54.1 73.6 54.7-27 21.1-60.9 33.7-97.8 33.7-6.4.0-12.6-.4-18.8-1.1C34.9 299 76.3 312 120.8 312c144.9.0 224.1-120 224.1-224.1.0-3.4-.1-6.8-.2-10.2 15.4-11.1 28.7-25 39.3-40.8z"/></svg>
<span>Twitter</span>
</a>
</div>
<div class="widget-social__item widget__item">
<a class="widget-social__link widget__link btn" title=GitHub rel="noopener noreferrer" href=https://github.com/sheepla target=_blank><svg class="widget-social__link-icon icon icon-github" width="24" height="24" viewBox="0 0 384 374"><path d="m192 0C85.9.0.0 85.8.0 191.7c0 84.7 55 156.6 131.3 181.9 9.6 1.8 13.1-4.2 13.1-9.2.0-4.6-.2-16.6-.3-32.6-53.4 11.6-64.7-25.7-64.7-25.7-8.7-22.1-21.3-28-21.3-28-17.4-11.9 1.3-11.6 1.3-11.6 19.3 1.4 29.4 19.8 29.4 19.8 17.1 29.3 44.9 20.8 55.9 15.9 1.7-12.4 6.7-20.8 12.2-25.6-42.6-4.8-87.5-21.3-87.5-94.8.0-20.9 7.5-38 19.8-51.4-2-4.9-8.6-24.3 1.9-50.7.0.0 16.1-5.2 52.8 19.7 15.3-4.2 31.7-6.4 48.1-6.5 16.3.1 32.7 2.2 48.1 6.5 36.7-24.8 52.8-19.7 52.8-19.7 10.5 26.4 3.9 45.9 1.9 50.7 12.3 13.4 19.7 30.5 19.7 51.4.0 73.7-44.9 89.9-87.7 94.6 6.9 5.9 13 17.6 13 35.5.0 25.6-.2 46.3-.2 52.6.0 5.1 3.5 11.1 13.2 9.2C329 348.2 384 276.4 384 191.7 384 85.8 298 0 192 0z"/></svg>
<span>GitHub</span>
</a>
</div>
</div>
</div>
<div class="widget-recent widget">
<h4 class=widget__title>最近の投稿</h4>
<div class=widget__content>
<ul class=widget__list>
<li class=widget__item><a class=widget__link href=/sheepla-note/posts/powershell-customization/>PowerShellのプロファイルをカスタマイズしてCLIの操作を快適にする</a></li>
<li class=widget__item><a class=widget__link href=/sheepla-note/posts/archlinux-fonts/>Arch Linuxにフォントをインストールする</a></li>
<li class=widget__item><a class=widget__link href=/sheepla-note/posts/zathura-introduction/>Linuxで高速なPDFビューワZathuraを使う</a></li>
<li class=widget__item><a class=widget__link href=/sheepla-note/posts/archlinux-pkglist/>Arch Linuxのパッケージをパッケージリストで管理する</a></li>
<li class=widget__item><a class=widget__link href=/sheepla-note/posts/pacman-oneliners/>pacman(+fzf)ワンライナーで快適パッケージ管理</a></li>
<li class=widget__item><a class=widget__link href=/sheepla-note/posts/introduction/>自己紹介</a></li>
</ul>
</div>
</div>
<div class="widget-categories widget">
<h4 class=widget__title>カテゴリー</h4>
<div class=widget__content>
<ul class=widget__list>
<li class=widget__item>
<a class=widget__link href=/sheepla-note/categories/archlinux/>archlinux</a></li>
<li class=widget__item>
<a class=widget__link href=/sheepla-note/categories/fonts/>fonts</a></li>
<li class=widget__item>
<a class=widget__link href=/sheepla-note/categories/fzf/>fzf</a></li>
<li class=widget__item>
<a class=widget__link href=/sheepla-note/categories/introduction/>introduction</a></li>
<li class=widget__item>
<a class=widget__link href=/sheepla-note/categories/oneliner/>oneliner</a></li>
<li class=widget__item>
<a class=widget__link href=/sheepla-note/categories/pacman/>pacman</a></li>
<li class=widget__item>
<a class=widget__link href=/sheepla-note/categories/powershell/>powershell</a></li>
<li class=widget__item>
<a class=widget__link href=/sheepla-note/categories/zathura/>zathura</a></li>
</ul>
</div>
</div>
<div class="widget-taglist widget">
<h4 class=widget__title>タグ</h4>
<div class=widget__content>
<a class="widget-taglist__link widget__link btn" href=/sheepla-note/tags/archlinux/ title=archlinux>archlinux (2)</a>
<a class="widget-taglist__link widget__link btn" href=/sheepla-note/tags/dotfiles/ title=dotfiles>dotfiles (1)</a>
<a class="widget-taglist__link widget__link btn" href=/sheepla-note/tags/fonts/ title=fonts>fonts (1)</a>
<a class="widget-taglist__link widget__link btn" href=/sheepla-note/tags/fzf/ title=fzf>fzf (1)</a>
<a class="widget-taglist__link widget__link btn" href=/sheepla-note/tags/introduction/ title=introduction>introduction (1)</a>
<a class="widget-taglist__link widget__link btn" href=/sheepla-note/tags/linux/ title=linux>linux (1)</a>
<a class="widget-taglist__link widget__link btn" href=/sheepla-note/tags/oneliner/ title=oneliner>oneliner (1)</a>
<a class="widget-taglist__link widget__link btn" href=/sheepla-note/tags/pacman/ title=pacman>pacman (2)</a>
<a class="widget-taglist__link widget__link btn" href=/sheepla-note/tags/pdf/ title=pdf>pdf (1)</a>
<a class="widget-taglist__link widget__link btn" href=/sheepla-note/tags/powershell/ title=powershell>powershell (1)</a>
<a class="widget-taglist__link widget__link btn" href=/sheepla-note/tags/zathura/ title=zathura>zathura (1)</a>
</div>
</div>
</aside>
</div>
<footer class=footer>
<div class="container footer__container flex">
<div class=footer__copyright>
&copy; 2021 Sheepla.
<span class=footer__copyright-credits>このサイトは <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> と <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> テーマで生成されています。</span>
</div>
</div>
</footer>
</div>
<script async defer src=/sheepla-note/js/menu.js></script>
</body>
</html>